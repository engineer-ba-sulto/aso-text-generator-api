# P4: API 統合と MVP リリース - 概要

## 概要

ステップ 4 では、これまでに実装した CSV 分析、キーワード選定、テキスト生成機能を統合し、完全な ASO テキスト生成 API として MVP をリリースします。統合エンドポイントと個別エンドポイントの両方を提供し、多言語対応（日本語・英語）を実現します。

## 目標

- 統合 API エンドポイントによる一括テキスト生成機能の提供
- 個別 API エンドポイントによる効率的な単一テキスト生成機能の提供
- 多言語対応（日本語・英語）の完全実装
- 完全な API 仕様書の整備
- MVP としての本格的なリリース準備

## 主要機能

### 1. 統合 API エンドポイント

- `POST /api/v1/generate-aso-texts`: 全テキスト項目を一括生成
- 言語指定機能（ja/en）
- 統一された処理フロー

### 2. 個別 API エンドポイント

- `POST /api/v1/generate-keyword-field`: キーワードフィールド生成
- `POST /api/v1/generate-title`: タイトル生成
- `POST /api/v1/generate-subtitle`: サブタイトル生成
- `POST /api/v1/generate-description`: 概要生成
- `POST /api/v1/generate-whats-new`: 最新情報生成

### 3. 多言語対応

- リクエスト時の言語指定
- 全サービスでの言語パラメータ引き渡し
- 言語別の適切なテキスト生成

### 4. API 仕様書

- FastAPI 自動ドキュメントの整備
- 言語パラメータの明記
- 使用例の提供

## 実装順序

1. **P4-001**: 統合 API エンドポイントの定義と実装
2. **P4-002**: 統一された処理フローの構築
3. **P4-003**: レスポンス形式の定義と実装
4. **P4-004**: 個別 API エンドポイントの定義と実装
5. **P4-005**: 個別エンドポイントの処理フロー最適化
6. **P4-006**: API 仕様書の整備とドキュメント化

## 成功基準

- [ ] 統合エンドポイントで全テキスト項目が正常に生成される
- [ ] 個別エンドポイントで各テキスト項目が正常に生成される
- [ ] 日本語・英語の両方で適切なテキストが生成される
- [ ] API 仕様書が完全に整備されている
- [ ] エラーハンドリングが適切に実装されている
- [ ] パフォーマンスが要件を満たしている

## 技術要件

### 必須技術

- FastAPI
- Pydantic（リクエスト・レスポンスモデル）
- 既存のサービスクラス（CSV 分析、キーワード選定、テキスト生成）
- 多言語プロンプト管理

### 設計原則

- 単一責任の原則
- 依存性注入
- エラーハンドリングの統一
- レスポンス形式の一貫性

## 関連チケット

- **P0-005**: エラーハンドリング（基盤）
- **P1-001**: CSV データモデルとバリデーション
- **P1-002**: キーワードスコアリング
- **P1-003**: 主要キーワードの自動選定
- **P2-001**: キーワードフィールド生成
- **P2-002**: タイトル生成
- **P2-003**: 最新情報生成
- **P3-001**: Gemini サービスクラス実装
- **P3-002**: 多言語プロンプト管理
- **P3-003**: サブタイトル生成
- **P3-004**: 概要生成

## 注意事項

- 言語パラメータの一貫した引き渡しが重要
- エラーハンドリングの統一性を保つ
- パフォーマンスを考慮した処理フローの設計
- API 仕様書の完全性を確保する
