### 最終的な MVP 開発ロードマップ（1 リクエスト →1 言語方式）

以上の考察を踏まえ、**「1 リクエストで 1 言語を出力する」**という推奨アプローチでロードマップを最終化します。

## **Python/FastAPI ASO テキスト生成 API MVP 開発ロードマップ (日英対応・単一言語出力)**

#### **ステップ 0：プロジェクト基盤の構築**

- **0-1. プロジェクト初期化**: Python 仮想環境を作成し、FastAPI プロジェクトの基本構造を構築します。
- **0-2. 依存関係管理**: `requirements.txt`を作成し、`fastapi`, `pandas`, `uvicorn`, `python-multipart`, `google-generativeai`を定義します。
- **0-3. プロジェクト構造**: `app/services/prompts`ディレクトリを作成し、その中に`ja.py`と`en.py`を配置するなど、多言語対応を前提とした構造を構築します。
- **0-4. 環境設定**: `.env`ファイルで Google AI (Gemini) API キーを管理します。
- **0-5. エラーハンドリング**: グローバルエラーハンドラーを実装し、一貫したエラーレスポンス形式を定義します。

#### **ステップ 1：CSV 分析と主要キーワード選定エンジンの実装 (言語非依存)**

- **1-1. CSV データモデルとバリデーション**: Pydantic を使い、アップロードされる CSV の必須カラムとデータ型を定義・検証します。
- **1-2. キーワードスコアリング**: 各キーワードに対し、ランキング、人気度、難易度を組み合わせた評価スコアを算出します。
- **1-3. 主要キーワードの自動選定**: スコアが最も高いキーワードを**「単一主要キーワード」**として自動選定します。

#### **ステップ 2：ルールベース＆統計ベースのテキスト生成機能の実装 (多言語対応)**

- **2-1. キーワードフィールド (100 文字) 生成**: 選定された「主要キーワード」とスコア上位の関連キーワードの単語を重複なく組み合わせ、100 文字以内に収めるアルゴリズムを実装します。
- **2-2. タイトル (30 文字) 生成**: `「{主要キーワード} - {アプリ基本名}」` のテンプレートに基づき、30 文字制限内でタイトルを生成します。
- **2-3. このバージョンの最新情報 (4,000 文字) 生成**: **日本語と英語の定型文テンプレートをそれぞれ準備し**、リクエストされた言語に応じて生成を切り替える機能を実装します。

#### **ステップ 3：Gemini 連携とクリエイティブテキスト生成機能の実装 (多言語対応)**

- **3-1. Gemini サービスクラスの実装**: Gemini API を呼び出す`gemini_generator.py`を作成します。ここの各メソッドは**`language`パラメータを受け取る**ように設計します。
- **3-2. 多言語プロンプト管理**: `prompts/ja.py`と`prompts/en.py`に、サブタイトル生成用や概要生成用のプロンプトをそれぞれの言語で定義します。
- **3-3. サブタイトル (30 文字) 生成**: 指定された言語のプロンプトを使い、「主要キーワード」を**含めずに**アプリの価値を表現するサブタイトルを Gemini に生成させる機能を実装します。
- **3-4. 概要 (4,000 文字) 生成**: 指定された言語のプロンプトを使い、「主要キーワード」を 4〜7 回程度自然に含めつつ、アプリの特徴を説明する文章を Gemini に生成させる機能を実装します。

#### **ステップ 4：API エンドポイントの統合と MVP リリース**

- **4-1. 統合 API エンドポイントの定義**: `POST /api/v1/generate-aso-texts` エンドポイントを実装します。リクエストボディには、CSV ファイル、アプリ基本名、特徴リストに加え、**生成したい単一の言語を指定する `language: str` フィールド**（例: "ja" or "en"）を必須項目として定義します。
- **4-2. 統一された処理フローの構築**: リクエストで受け取った`language`パラメータを後続の全サービスに引き渡し、最終的な出力が**指定された一つの言語**になるように一連の処理フローを構築します。
- **4-3. レスポンス形式の定義**: 生成された全項目を構造化された JSON 形式で返します。レスポンスのキーは共通ですが、値（生成されたテキスト）は指定された言語になります。
- **4-4. API 仕様書の整備**: FastAPI の自動ドキュメント（Swagger UI）に、必須項目となった`language`フィールドとその許容値（"ja", "en"）について明記します。
